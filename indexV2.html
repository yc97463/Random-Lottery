<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <title>ä¸‰æ°‘è€¶æ™šæŠ½ç±¤ï¼</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="ä¸‰æ°‘è€¶æ™šæŠ½ç±¤ï¼">
    <meta property="og:locale" content="zh_TW" />
    <link rel="stylesheet" href="https://getbootstrap.com/docs/4.5/dist/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://getbootstrap.com/docs/4.5/dist/js/bootstrap.min.js"></script>
    <meta http-equiv="pragma" content="no-cache">
    <meta name="author" content="">
    <meta name="robots" content="noindex,nofollow">
    <!-- icons -->
    <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Noto+Serif+JP:wght@600;700&family=Noto+Serif+TC:wght@600;700&family=Poppins:wght@400;500;600;700&display=swap');
    * {
        font-family:  'Fira Code', 'Noto Sans TC', sans-serif;
    }
    /* .navbar-brand, .container .data-h3, .btn {
        font-family: 'Noto Serif TC', 'Noto Serif JP', 'Noto Sans TC', sans-serif;
    } */
    body {
        background:#4b4276;
        /* color:#FFF; */
        
    }
    @keyframes pop {
        0% { transform: translate(0%, 20%) scale(1.25, 0.75); }
        50% { transform: translate(0%, 30%) scale(1, 1); }
        55% { transform: translate(0%, 30%) rotate(15deg); }
        60% { transform: translate(0%, 30%) rotate(-15deg); }
        65% { transform: translate(0%, 30%) rotate(15deg); }
        70% { transform: translate(0%, 30%) rotate(-15deg); }
        100% { transform: translate(0%, 20%) scale(1.25, 0.75); }
    }
    .jump {
        display:inline;
        animation: pop 1.2s infinite;
        font-size:250px;

    }
    .container-flex {
        height: calc(100%-40px);
        width:100%;
        background:#000000;
    }

    .pickedListCard  {
        font-size: 80px;
        margin-right: 25px;
    }
    .pickedListCard .key  {
        border-radius: 50px;
        padding: 0 30px;
        margin-right: 10px;
        margin-left: 10px;
        /* background-color: aquamarine; */
    }

    .popping {
        display:inline-block;
        animation: pulse 0.3s ease-in infinite;
    }

    @keyframes pulse{
        25%  {transform: scale(0.9);}
        75%  {transform: scale(1.1);}
    }

    </style>
</head>
<script type="text/javascript">
    function sysDetect() {
        //å…ˆåµæ¸¬ç’°å¢ƒè®Šæ•¸
        document.getElementById('pickResult').hidden = true;
        var ticketMax = 0;
        pickedRecord = [];
        pickedID = 0;
        if (ticketMax == 0) {
            $("#setTicketInfoModal").modal();
        }
    }
    function saveTicketInfo() {
        //å„²å­˜ Ticket è³‡è¨Š
        const form = document.forms['setTicketInfoForm'];
        ticketMax = form.elements.ticketMaxInput.value;
        pickedID = Math.floor(form.elements.pickedIDInput.value);
        console.log(ticketMax, pickedIDInput);
        // alert(ticketMax);
        $("#setTicketInfoModal").modal('hide');
    }
    function randomNumber(min, max) {  
        return Math.floor(Math.random() * (max - min) + min); 
    }
    function record(id, hasPicked) {
        pickedRecord.push(hasPicked);
        var div = document.getElementById('pickedListDiv');
        
        div.innerHTML += '<div class="pickedListCard alert alert-info col"><span class="key btn-info">' + id + '</span><span class="picked">' + hasPicked + '</span>';
    }
    function randomBG() {
        var x = Math.floor(Math.random() * 256);
        var y = Math.floor(Math.random() * 256);
        var z = Math.floor(Math.random() * 256);
        var bgColor = "rgb(" + x + "," + y + "," + z + ")";
        document.body.style.background = bgColor;
    }
    function pickNext() {
        var audio = new Audio("./drum.mp3" );
        audio.play();
        document.getElementById('startGame').innerHTML = '';
        document.getElementById('pickedTitle').innerHTML = '<b id="pickedTitle">æŠ½çä¸­ï¼Œ' + pickedID + ' è™Ÿå¾—ä¸»æ˜¯</b>';
        document.getElementById('pickedNum').innerHTML = "<br><b class='jump popping'>â‹¯</b>";
        setTimeout(function(){
            // audio.pause();
            //set background color
            hasPicked = randomNumber(0, ticketMax);
            record(pickedID, hasPicked);
            pickedID =  pickedID + 1;
            console.log(pickedRecord);
            //show on screen
            randomBG();
            document.getElementById('pickedTitle').innerHTML = '<b id="pickedTitle">æ­å–œä¸­ç ğŸ‰</b>';
            document.getElementById('pickedNum').innerHTML = "<br><b class='jump'>" + hasPicked + "</b>" ;
        },1500);
        // while(True){
            
        // }

    }
    function showPickedList() {        
        $("#showPickedListModal").modal();
    }
    
</script>
<!--  onclick="reload()" -->
<body onload="sysDetect()">
    <div class="modal fade" id="setTicketInfoModal" role="dialog" data-backdrop="static">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">è¨­å®šç’°å¢ƒè®Šæ•¸</h5>
                </div>
                <div class="modal-body">
                    <form name="setTicketInfoForm" id="setTicketInfoForm" target="javascript:;" method="POST">
                        <div class="form-group">
                            <label for="ticketMaxInput">ç¥¨åˆ¸ç¸½æ•¸</label>
                            <input type="number" class="form-control" name="ticketMaxInput" id="ticketMaxInput" aria-describedby="helpTicketMax" autofocus="autofocus" min="1" required>
                            <small id="helpTicketMax" class="form-text text-muted">è«‹è¼¸å…¥ç¥¨åˆ¸ç¸½æ•¸ï¼Œä¾‹å¦‚ <code>445</code> ã€‚</small>
                        </div>
                        <div class="form-group">
                            <label for="ticketMaxInput">è¨ˆæ•¸èµ·å§‹</label>
                            <input type="number" class="form-control" name="pickedIDInput" id="pickedIDInput" aria-describedby="helpTicketMax" autofocus="autofocus" min="1" required value="1">
                            <small id="helpTicketMax" class="form-text text-muted">è«‹è¼¸å…¥è¨ˆæ•¸èµ·å§‹æ•¸ï¼Œä¾‹å¦‚ ç¬¬ <code>9</code> ä½ï¼Œé è¨­æ˜¯å¾ç¬¬ <code>1</code> ä½é–‹å§‹æŠ½çã€‚</small>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="window.location.reload()">é‡ä¾†</button>
                    <button type="button" class="btn btn-success" onclick="saveTicketInfo()">å„²å­˜</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="pickingMsgModal" role="dialog" data-backdrop="static">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-body">
                    æŠ½çä¸­
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="showPickedListModal" role="dialog" data-backdrop="static">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">ä¸­çç´€éŒ„åå–®</h5>
                </div>
                <div class="modal-body">
                    <div class="pickedListCard alert alert-warning" style="width:100%;">
                        ç¤ºä¾‹ï¼š
                        <span class="key btn-info">ç¬¬ N ä½</span> 
                        <span class="picked">ç¥¨åˆ¸ç·¨è™Ÿ</span>
                    </div>
                    <hr>
                    <div class="container">
                        <div class="row" id="pickedListDiv">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" style="width:100%">é—œé–‰</button>
                </div>
            </div>
        </div>
    </div>
    <center id="mainContent" style=" margin-top:50px;">
        <div class="d-flex justify-content-center" id="startGame" onclick="pickNext()" style="color:white;">
            <br><b class='jump'>é–‹å§‹æŠ½ç</b> 
        </div>
        <div class="d-flex justify-content-center" id="pickResult" style="color:white;">
            <div class="container">
                <center>
                    <h1 style="text-decoration: none;font-size:100px;">
                        <div id="pickedTitle"></div>
                    </h1>
                </center>
                <center>
                    <div id="pickedNum"></div>
                </center>
                <hr>
                <center>
                    <div class="d-flex justify-content-center" id="btns" style="margin-top:100px;">
                        <button type="button" class="btn btn-lg btn-success" onclick="pickNext()" style="margin-right: 25px;">ğŸ° æŠ½ï¼</button>
                        <button type="button" class="btn btn-lg btn-info" onclick="showPickedList()" style="margin-right: 25px;">ğŸ‰ ä¸­çåå–®</button>
                        <button type="button" class="btn btn-lg btn-secondary" onclick="window.location.reload()">ğŸ‘‹ å…¨éƒ¨é‡ä¾†</button>
                    </div>
                </center>
            </div>
            
        </div>
    </center>
</body>
</html>
